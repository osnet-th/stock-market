# Production Environment Configuration

# CORS 설정
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}

spring:
  # PostgreSQL Database - 운영 환경 (환경 변수 사용)
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/stocks_prod}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      connection-timeout: 3000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000
      connection-properties:
        reWriteBatchedInserts: true

  # JPA/Hibernate - 운영 환경
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        use_sql_comments: false

# JWT Configuration - 운영 환경 (환경 변수 필수)
jwt:
  secret: ${JWT_SECRET}
  access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION:1800000}    # 30분 (밀리초)
  refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION:604800000}  # 7일 (밀리초)

# External APIs - 운영 환경 (환경 변수 사용)
finnhub:
  api:
    key: ${FINNHUB_API_KEY}

kis:
  api:
    key: ${KIS_API_KEY}
    secret: ${KIS_API_SECRET}
    account: ${KIS_ACCOUNT_NUMBER}

# Logging - 운영 환경
logging:
  level:
    root: INFO
    com.thlee.stock.market: INFO
    org.springframework.security: WARN
    org.springframework.web: WARN
    org.hibernate.SQL: WARN

# Swagger - 운영 환경 (비활성화)
springdoc:
  swagger-ui:
    enabled: false

# Actuator - 운영 환경
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized
